
DELETE FROM config_info WHERE id > 8;

INSERT INTO `config_info` (`id`, `data_id`, `group_id`, `content`, `md5`, `gmt_create`, `gmt_modified`, `src_user`, `src_ip`, `app_name`, `tenant_id`, `c_desc`, `c_use`, `effect`, `type`, `c_schema`, `encrypted_data_key`) VALUES (9, 'hummer-xpack-prod.yml', 'DEFAULT_GROUP', '# spring配置\nspring:\n  # flyway enable\n  flyway:\n    # 启用或禁用 flyway\n    enabled: true\n    # 当迁移时发现目标schema非空，而且带有没有元数据的表时，是否自动执行基准迁移，默认false.\n    baseline-on-migrate: true\n    # 默认脚本加载路径：/db/migration\n    locations: classpath:db/migration\n    # 指定 baseline 的版本号,默认值为 1, 低于该版本号的 SQL 文件, migrate 时会被忽略\n    baseline-version: 0\n    # 字符编码\n    encoding: UTF-8\n    # 迁移时是否校验，默认为 true\n    validate-on-migrate: false\n    # 是否要被替换，默认 true\n    placeholder-replacement: false\n    # metadata 版本控制信息表 默认 flyway_schema_history\n    table: xpack_version\n    # 数据库配置\n    url: jdbc:mysql://${HMR_MYSQL_HOST}:${HMR_MYSQL_PORT}/${HMR_MYSQL_DB}?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false\n    user: ${HMR_MYSQL_USER}\n    password: ${HMR_MYSQL_PASSWORD}\n\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://${HMR_MYSQL_HOST}:${HMR_MYSQL_PORT}/${HMR_MYSQL_DB}?autoReconnect=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&zeroDateTimeBehavior=convertToNull&useSSL=false\n    username: ${HMR_MYSQL_USER}\n    password: ${HMR_MYSQL_PASSWORD}\n\n# mybatis配置\nmybatis:\n    # 搜索指定包别名\n    typeAliasesPackage: com.hummer.xpack.domain\n    # 配置mapper的扫描，找到所有的mapper.xml映射文件\n    mapperLocations: classpath:com/hummer/xpack/mapper/*.xml\n\n# swagger配置\nswagger:\n  title: 扩展模块接口文档\n  license: Powered By hummer\n  licenseUrl: https://hummerrisk.com',  '8e0490b7f81646b44a7ef99d9eca0e9e', sysdate(), sysdate(), 'nacos', '0:0:0:0:0:0:0:1', '', '', '扩展模块', 'null', 'null', 'yaml', '', '');

update `config_info` set `content` = 'spring:\n  cloud:\n    gateway:\n      discovery:\n        locator:\n          lowerCaseServiceId: true\n          enabled: true\n      routes:\n        # 认证中心\n        - id: hummer-auth\n          uri: lb://hummer-auth\n          predicates:\n            - Path=/auth/**\n          filters:\n            - StripPrefix=1\n        # 系统模块\n        - id: hummer-system\n          uri: lb://hummer-system\n          predicates:\n            - Path=/system/**\n          filters:\n            - StripPrefix=1\n        # 混合云模块\n        - id: hummer-cloud\n          uri: lb://hummer-cloud\n          predicates:\n            - Path=/cloud/**\n          filters:\n            - StripPrefix=1\n        # 云原生模块\n        - id: hummer-k8s\n          uri: lb://hummer-k8s\n          predicates:\n            - Path=/k8s/**\n          filters:\n            - StripPrefix=1\n        # 扩展模块\n        - id: hummer-xpack\n          uri: lb://hummer-xpack\n          predicates:\n            - Path=/xpack/**\n          filters:\n            - StripPrefix=1\n# 安全配置\nsecurity:\n  # 防止XSS攻击\n  xss:\n    enabled: true\n    excludeUrls:\n      - /system/notice\n  # 不校验白名单\n  ignore:\n    whites:\n      - /\n      - /login\n      - /auth/signin\n      - /auth/isLogin\n      - /auth/language\n      - /system/webmsg/unReadCount\n      - /**/v3/api-docs**\n' where `id` = '2';
